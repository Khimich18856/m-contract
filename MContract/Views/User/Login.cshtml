@model MContract.Models.User

@{
    ViewBag.Title = ViewBag.Heading;
    Layout = "~/Views/Shared/_Layout.cshtml";
	var errorMessage = Model.ErrorMessage;
}

@section Styles{
    <link href="@Url.Content("~/css/log-in.css")?p=2020-10-10-a" rel="stylesheet" type="text/css" />
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <!-- Вход-->
    <section class="log__page__wrapper">
        <div class="container">
            <div class="row">
                <div class="col text-center">
                    <h1>Вход</h1>
                </div>
            </div>

            <!-- Form inputs -->
            <form action="">
				<div class="row">
					<div class="col-sm-12">
                        <div class="status-of-log">
                            @if (errorMessage != null && errorMessage.Contains("пароль"))
                            {
                                <div class="false-pas">
                                    Неправильный Логин или Пароль
                                </div>
                            }
                            @if (errorMessage != null && errorMessage.Contains("Email"))
                            {
                                <div class="false-mail">
                                    Пользователь с данным E-Mail не найден, проверьте правильность ввода или <a href="@ViewBag.L.SiteUrlClear/registration">зарегистрируйтесь</a>
                                </div>
                            }
                            @if (errorMessage != null && errorMessage.Contains("повторно?"))
                            {
                        <div class="false-mail">
                            Вы не подтвердили Ваш E-Mail. Хотите <a href="@ViewBag.L.SiteUrlClear/resendemail">получить</a> письмо подтверждения повторно?
                        </div>
                            }
                        </div>
					</div>
					<div class="col-md-3"></div>
					<div class="col-sm-12 col-md-6 input__col">
						<div class="input__wrapper letter-padding-desktop">
							<label for="email">Логин</label>
							<input type="email" id="email" placeholder="E-Mail" name="email" required value="@Model.Email">
						</div>
					</div>
					<div class="col-md-3"></div>
				</div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-sm-12 col-md-6 input__col">
                        <div class="input__wrapper letter-padding-desktop">
                            <label for="password">Пароль</label>
                            <input type="password" id="password" name="password">
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>

                <!-- // Form inputs -->

                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-sm-12 col-md-6 input__col">
                        <div class="input__wrapper">
                            <a class="input__forgot" href="#">Забыли пароль?</a>
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-sm-12 col-md-6 input__col">
                        <div class="input__wrapper btn__wrapper">
                            <button type="submit" href="#" class="btn btn_log-in" onclick="return checkFields();"> <span>Войти</span> </button>
                            <a href="@ViewBag.L.SiteUrlClear/registration" class="btn btn_reg">Регистрация</a>
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>
            </form>
        </div>
    </section>
    <!-- // Вход-->
}

<script type="text/javascript">
    function checkFields() {
        var result = true;
        if ($('#email').val().length == 0) {
            $('#emailRequired').show();
            result = false;
        }
        else
            $('#emailRequired').hide();

        if ($('#password').val().length == 0) {
            $('#passwordRequired').show();
            result = false;
        }
        else
            $('#passwordRequired').hide();

        return result;
    }
</script>